E.M <- null
E.M <- NULL
test <- 1:4
test
c(test,e.M)
c(test,E.M)
load("~/Dropbox/P2 Objects/bkmr_m_joint_noage_nooutliers.RData")
load("~/Dropbox/Publications/Paper2/P2 R Objects/bkmr_m_joint_noage_nooutliers.RData")
head(fit.m.joint.noage$X)
## mean level of confounders
X.predict.noage    <- matrix(colMeans(X.joint.noage),nrow=1)
load("~/Dropbox/Publications/Paper2/data/dat_bothclinics_nutr.RData")
load("~/Dropbox/Publications/Paper2/data/dat_bothclinics.RData")
## mean level of confounders
X.predict.noage    <- matrix(colMeans(X.joint.noage),nrow=1)
X.predict.noage
load("~/Dropbox/Publications/Paper2/P2 Objects/bkmr_y_joint_ageh_nooutliers.RData")
load("~/Dropbox/Publications/Paper2/P2 Objects/bkmr_y_TE_joint_ageh_nooutliers.RData")
load("~/Dropbox/Publications/Paper2/P2 R Objects/bkmr_m_joint_noage_nooutliers.RData")
load("~/Dropbox/Publications/Paper2/P2 Objects/bkmr_y_joint_vs_ageh_nooutliers.RData")
load("~/Dropbox/Publications/Paper2/P2 Objects/bkmr_y_TE_joint_vs_ageh_nooutliers.RData")
load("~/Dropbox/Publications/Paper2/P2 Objects/bkmr_m_joint_vs_noage_nooutliers.RData")
load("~/Dropbox/Publications/Paper2/P2 Objects/bkmr_y_joint_ageh_nooutliers.RData")
load("~/Dropbox/Publications/Paper2/P2 R Objects/bkmr_y_joint_ageh_nooutliers.RData")
load("~/Dropbox/Publications/Paper2/P2 R Objects/bkmr_y_TE_joint_ageh_nooutliers.RData")
load("~/Dropbox/Publications/Paper2/P2 R Objects/bkmr_m_joint_noage_nooutliers.RData")
load("~/Dropbox/Publications/Paper2/P2 R Objects/bkmr_y_joint_vs_ageh_nooutliers.RData")
load("~/Dropbox/Publications/Paper2/P2 R Objects/bkmr_y_TE_joint_vs_ageh_nooutliers.RData")
load("~/Dropbox/Publications/Paper2/P2 R Objects/bkmr_m_joint_vs_noage_nooutliers.RData")
head(fit.m.joint.noage$X)
head(fit.m.joint.vs.noage$X)
head(fit.y.joint.vs.noage$X)
head(fit.y.joint.noage$X)
head(fit.y.joint.ageh$X)
View(fit.y.joint.vs.ageh)
View(fit.m.joint.noage)
View(fit.y.joint.ageh)
View(fit.m.joint.vs.noage)
View(fit.m.joint.vs.noage)
dat <- dat.nutr
A <- cbind(dat$as_ln_z,dat$mn_ln_z,dat$pb_ln_z)
m <- dat$birthlength_z
y <- dat$ccs_z
## additional covariates assumed to have a linear effect with the mediator and outcome
X <- cbind(dat$momage_z,dat$smokenv,dat$sex,dat$momedud,dat$momIQ_z,dat$homescore_z,dat$proteintert)
E.M <- NULL
E.Y <- dat$age_z
Z.M <- cbind(A,E.M)
Z.Y <- cbind(A,E.Y)
head(Z.M)
head(Z.Y)
Zm.Y <- cbind(Z.Y,m)
head(Zm.Y)
colnames(Z.M)  <- c("As","Mn","Pb")
colnames(Z.Y)  <- c("As","Mn","Pb","age")
colnames(Zm.Y) <- c("As","Mn","Pb","age","BL")
head(Z.M)
head(Z.Y)
head(Zm.Y)
head(A)
colnames(Z.M)  <- colnames(A)  <- c("As","Mn","Pb")
head(A)
quantile(E.Y[,"age"], probs=0.1)
head(E.Y)
astar.age10 <- c(apply(A, 2, quantile, probs=0.25), quantile(E.Y, probs=0.1))
astar.age90 <- c(apply(A, 2, quantile, probs=0.25), quantile(E.Y, probs=0.9))
a.age10 <- c(apply(A, 2, quantile, probs=0.75), quantile(E.Y, probs=0.1))
a.age90 <- c(apply(A, 2, quantile, probs=0.75), quantile(E.Y, probs=0.9))
astar.age10
library(bkmr)
## load the source file
## it needs to be in your working directory for it to load as is
source("source_BKMR_CMA.R")
A <- cbind(dat$as_ln_z,dat$mn_ln_z,dat$pb_ln_z)
m <- dat$birthlength_z
y <- dat$ccs_z
## additional covariates assumed to have a linear effect with the mediator and outcome
X <- cbind(dat$momage_z,dat$smokenv,dat$sex,dat$momedud,dat$momIQ_z,dat$homescore_z,dat$proteintert)
E.M <- NULL
E.Y <- dat$age_z
Z.M <- cbind(A,E.M)
Z.Y <- cbind(A,E.Y)
Zm.Y <- cbind(Z.Y,m)
colnames(Z.M)  <- colnames(A)  <- c("As","Mn","Pb")
colnames(Z.Y)  <- c("As","Mn","Pb","age")
colnames(Zm.Y) <- c("As","Mn","Pb","age","BL")
